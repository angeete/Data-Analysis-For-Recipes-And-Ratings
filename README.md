# Data Analysis For Recipes And Ratings
A data analysis of a recipes and ratings data set as a final project for EECS 398 at the University of Michigan
 
## Introduction
There are many recipes to choose from all around the world, to the point that choosing one can be overwhelming. Ideally, many people would choose a recipe that has a high rating, but what leads to a recipe being highly rated? This leads us to our driving question: What factors lead to a recipe having a higher average rating? To solve this question, we used exploratory data analysis to evaluate different factors from our dataset and then used predictive models to see how easily these factors could predict average ratings for recipes.  
We were given two datasets for this project, RAW_recipes.csv and RAW_interactions.csv. RAW_recipes.csv contains information about recipes from food.com, while RAW_interactions.csv contains information about the corresponding reviews and ratings for these recipes. The interactions dataset has 731,927 rows and the recipes dataset has 83,781 rows. We created a dataframe for each dataset, named 'interactions' and 'recipes'. From the 'interactions' dataframe, the minutes, hours, protein, calories, n_steps, n_ingredients, average rating, positive_score, and negative_score columns are all columns in the 'interactions' dataframe that were useful in our project. The hours, protein, calories, average rating, positive_score, and negative_score columns are columns we added to the 'interactions' dataframe, and extracted from the minutes, nutrition, ratings, and review columns. The minutes column is the number of minutes it takes to make the recipe, the hours column is the number of hours it takes to make the recipe, the protein column is the percent daily value of protein in a recipe (extracted from the nutrition column).
 
## Data Cleaning and Exploratory Data Analysis
Describe, in detail, the data cleaning steps you took and how they affected your analyses. The steps should be explained in reference to the data generating process. Show the head of your cleaned DataFrame (see Part 2: Report for instructions).
### Data Cleaning
The first step for data cleaning involved reformatting the 'interactions' dataframe such that each recipe corresponds to only one row in the data frame. This process required for us to combine all of the reviews, ratings, user_ids for the reviews, and the dates for the reviews into lists such that they fit within a row. This was done so that all the ratings and reviews for one recipe could be accessed just by looking up the recipe. 
 
The second step for data cleaning involved imputation and adding columns. All ratings of zero were inputed with np.nan, as a rating of zero in this dataset represents recipes with no ratings. We created an average rating column using the list of our ratings and ignored np.nan values in our mean calculations so that each recipe gets the correct average rating value. Note that this average rating column will be extensively used in the analysis as it is a good indicator of what people think of a recipe and what is a singular value for each recipe.   
 
The third step for data cleaning involved merging the 'recipes' and 'interactions' dataframes into one dataframe, called the 'combined' dataframe. We do this in order to easily perform operations and compare different features from both datasets. We also created an 'hours' column in our 'combined' dataframe by dividing the 'minute' column by 60. Additionally, the 'calories' and 'protein' columns were created in the 'combined' dataframe by extracting these values from the 0th and 4th posititions respectively from the lists stored in the nutrition column.   
 
The fourth step for data cleaning was to ensure that all columns in the combined dataframe had no np.nan values. This is because having np.nan values in our dataframe would cause problems in the executing our models later on. In order to fix this issue, we imputed all np.nan values in the average rating, protein, calories, n_steps, and n_ingredients column with 0. We chose to replace the np.nan values with 0 because having np.nan values represents an absence of a feature for a specific recipe (for example, having np.nan in the protein column for a specific recipe means that there is no protein in that recipe).
 
### Outliers
The fifth step for data cleaning was to investigate outliers. In particular, there were three very extreme outliers we saw in the dataframe. To investigate the outliers, we found the index of these reviews in the dataframe and looked at the name of these recipes. One of the reviews was titled "How to preserve your husband", and it had an egregious cooking time of 17520 hours. This review does not make sense at all, so we removed this review from the dataframe.  
 
The other two outlier reviews also had quite high cooking times. The names of these recipes are "how to make homemade vanilla" and "how to make homemade fruit liquers". When looking up the standard time needed to makes these recipes, they ranged from a few weeks to a few months to even years, so the high cooking times for these two recipes made sense. Therefore we decided to keep these two recipes in the dataframe. 
 
| name                                 |     id |   minutes |   contributor_id | submitted   | tags                                                                                                                                                                                                                                                                                               | nutrition                                     |   n_steps | steps                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | description                                                                                                                                                                                                                                                                                                                                                                       | ingredients                                                                                                                                                                                                                             |   n_ingredients |   recipe_id | review                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | rating               | user_id                          | date                                                     |   avg_rating |    hours |   calories |   protein | combined_reviews                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |   positive_score |   negative_score |
|:-------------------------------------|-------:|----------:|-----------------:|:------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------|----------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------:|------------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------|:---------------------------------|:---------------------------------------------------------|-------------:|---------:|-----------:|----------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------:|-----------------:|
| 1 brownies in the world    best ever | 333281 |        40 |           985201 | 2008-10-27  | ['60-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'preparation', 'for-large-groups', 'desserts', 'lunch', 'snacks', 'cookies-and-brownies', 'chocolate', 'bar-cookies', 'brownies', 'number-of-servings']                                                                        | [138.4, 10.0, 50.0, 3.0, 3.0, 19.0, 6.0]      |        10 | ['heat the oven to 350f and arrange the rack in the middle', 'line an 8-by-8-inch glass baking dish with aluminum foil', 'combine chocolate and butter in a medium saucepan and cook over medium-low heat , stirring frequently , until evenly melted', 'remove from heat and let cool to room temperature', 'combine eggs , sugar , cocoa powder , vanilla extract , espresso , and salt in a large bowl and briefly stir until just evenly incorporated', 'add cooled chocolate and mix until uniform in color', 'add flour and stir until just incorporated', 'transfer batter to the prepared baking dish', 'bake until a tester inserted in the center of the brownies comes out clean , about 25 to 30 minutes', 'remove from the oven and cool completely before cutting']                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | these are the most; chocolatey, moist, rich, dense, fudgy, delicious brownies that you'll ever make.....sereiously! there's no doubt that these will be your fav brownies ever for you can add things to them or make them plain.....either way they're pure heaven!                                                                                                              | ['bittersweet chocolate', 'unsalted butter', 'eggs', 'granulated sugar', 'unsweetened cocoa powder', 'vanilla extract', 'brewed espresso', 'kosher salt', 'all-purpose flour']                                                          |               9 |      333281 | ['These were pretty good, but took forever to bake.  I would send it ended up being almost an hour!  Even then, the brownies stuck to the foil, and were on the overly moist side and not easy to cut.  They did taste quite rich, though!  Made for My 3 Chefs.']                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | [4.0]                | [386585]                         | ['2008-11-19']                                           |            4 | 0.666667 |      138.4 |         3 | These were pretty good, but took forever to bake.  I would send it ended up being almost an hour!  Even then, the brownies stuck to the foil, and were on the overly moist side and not easy to cut.  They did taste quite rich, though!  Made for My 3 Chefs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |        0         |         0.264255 |
| 1 in canada chocolate chip cookies   | 453467 |        45 |          1848091 | 2011-04-11  | ['60-minutes-or-less', 'time-to-make', 'cuisine', 'preparation', 'north-american', 'for-large-groups', 'canadian', 'british-columbian', 'number-of-servings']                                                                                                                                      | [595.1, 46.0, 211.0, 22.0, 13.0, 51.0, 26.0]  |        12 | ['pre-heat oven the 350 degrees f', 'in a mixing bowl , sift together the flours and baking powder', 'set aside', 'in another mixing bowl , blend together the sugars , margarine , and salt until light and fluffy', 'add the eggs , water , and vanilla to the margarine / sugar mixture and mix together until well combined', 'add in the flour mixture to the wet ingredients and blend until combined', 'scrape down the sides of the bowl and add the chocolate chips', 'mix until combined', 'scrape down the sides to the bowl again', 'using an ice cream scoop , scoop evenly rounded balls of dough and place of cookie sheet about 1 - 2 inches apart to allow for spreading during baking', 'bake for 10 - 15 minutes or until golden brown on the outside and soft & chewy in the center', 'serve hot and enjoy !']                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | this is the recipe that we use at my school cafeteria for chocolate chip cookies. they must be the best chocolate chip cookies i have ever had! if you don't have margarine or don't like it, then just use butter (softened) instead.                                                                                                                                            | ['white sugar', 'brown sugar', 'salt', 'margarine', 'eggs', 'vanilla', 'water', 'all-purpose flour', 'whole wheat flour', 'baking soda', 'chocolate chips']                                                                             |              11 |      453467 | ['Originally I was gonna cut the recipe in half (just the 2 of us here), but then we had a park-wide yard sale, & I made the whole batch & used them as enticements for potential buyers ~ what the hey, a free cookie as delicious as these are, definitely works its magic! Will be making these again, for sure! Thanks for posting the recipe!']                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [5.0]                | [424680]                         | ['2012-01-26']                                           |            5 | 0.75     |      595.1 |        13 | Originally I was gonna cut the recipe in half (just the 2 of us here), but then we had a park-wide yard sale, & I made the whole batch & used them as enticements for potential buyers ~ what the hey, a free cookie as delicious as these are, definitely works its magic! Will be making these again, for sure! Thanks for posting the recipe!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |        0.0860945 |         0        |
| 412 broccoli casserole               | 306168 |        40 |            50969 | 2008-05-30  | ['60-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'preparation', 'side-dishes', 'vegetables', 'easy', 'beginner-cook', 'broccoli']                                                                                                                                               | [194.8, 20.0, 6.0, 32.0, 22.0, 36.0, 3.0]     |         6 | ['preheat oven to 350 degrees', 'spray a 2 quart baking dish with cooking spray , set aside', 'in a large bowl mix together broccoli , soup , one cup of cheese , garlic powder , pepper , salt , milk , 1 cup of french onions , and soy sauce', 'pour into baking dish , sprinkle remaining cheese over top', 'bake for 25 minutes or until cheese is lightly browned', 'sprinkle with rest of french fried onions and bake until onions are browned and cheese is bubbly , about 10 more minutes']                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | since there are already 411 recipes for broccoli casserole posted to "zaar" ,i decided to call this one  #412 broccoli casserole.i don't think there are any like this one in the database. i based this one on the famous "green bean casserole" from campbell's soup. but i think mine is better since i don't like cream of mushroom soup.submitted to "zaar" on may 28th,2008 | ['frozen broccoli cuts', 'cream of chicken soup', 'sharp cheddar cheese', 'garlic powder', 'ground black pepper', 'salt', 'milk', 'soy sauce', 'french-fried onions']                                                                   |               9 |      306168 | ["This was one of the best broccoli casseroles that I have ever made.  I made my own chicken soup for this recipe. I was a bit worried about the tsp of soy sauce but it gave the casserole the best flavor. YUM!  \nThe photos you took (shapeweaver) inspired me to make this recipe and it actually does look just like them when it comes out of the oven.  \nThanks so much for sharing your recipe shapeweaver. It was wonderful!  Going into my family's favorite Zaar cookbook :)", "I made this for my son's first birthday party this weekend. Our guests INHALED it! Everyone kept saying how delicious it was. I was I could have gotten to try it.", 'Loved this.  Be sure to completely thaw the broccoli.  I didn&#039;t and it didn&#039;t get done in time specified.  Just cooked it a little longer though and it was perfect.  Thanks Chef.', '5 stars from my husband and son, my toughest critics. I used a 10-oz bag of chopped broccoli and a 10-oz bag of flowerettes which gave it more texture. Very good flavor and the smell while cooking was great. The sauce held it together without overwhelming the broccoli.'] | [5.0, 5.0, 5.0, 5.0] | [29782, 1196280, 768828, 520830] | ['2008-12-31', '2009-04-13', '2013-08-02', '2017-10-17'] |            5 | 0.666667 |      194.8 |        22 | This was one of the best broccoli casseroles that I have ever made.  I made my own chicken soup for this recipe. I was a bit worried about the tsp of soy sauce but it gave the casserole the best flavor. YUM!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |        0.25759   |         0        |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                    |                                               |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                         |                 |             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                      |                                  |                                                          |              |          |            |           | The photos you took (shapeweaver) inspired me to make this recipe and it actually does look just like them when it comes out of the oven.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                  |                  |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                    |                                               |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                         |                 |             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                      |                                  |                                                          |              |          |            |           | Thanks so much for sharing your recipe shapeweaver. It was wonderful!  Going into my family's favorite Zaar cookbook :) I made this for my son's first birthday party this weekend. Our guests INHALED it! Everyone kept saying how delicious it was. I was I could have gotten to try it. Loved this.  Be sure to completely thaw the broccoli.  I didn&#039;t and it didn&#039;t get done in time specified.  Just cooked it a little longer though and it was perfect.  Thanks Chef. 5 stars from my husband and son, my toughest critics. I used a 10-oz bag of chopped broccoli and a 10-oz bag of flowerettes which gave it more texture. Very good flavor and the smell while cooking was great. The sauce held it together without overwhelming the broccoli.                                                                  |                  |                  |
| millionaire pound cake               | 286009 |       120 |           461724 | 2008-02-12  | ['time-to-make', 'course', 'cuisine', 'preparation', 'occasion', 'north-american', 'desserts', 'american', 'southern-united-states', 'dinner-party', 'holiday-event', 'cakes', 'dietary', 'christmas', 'thanksgiving', 'low-sodium', 'low-in-something', 'taste-mood', 'sweet', '4-hours-or-less'] | [878.3, 63.0, 326.0, 13.0, 20.0, 123.0, 39.0] |         7 | ['freheat the oven to 300 degrees', 'grease a 10-inch tube pan with butter , dust the bottom and sides with flour , and set aside', 'in a large mixing bowl , cream the butter and sugar with an electric mixer and add the eggs one at a time , beating after each addition', 'alternately add the flour and milk , stirring till the batter is smooth', 'add the two extracts and stir till well blended', 'scrape the batter into the prepared pan and bake till a cake tester or knife blade inserted in the center comes out clean , about 1 1 / 2 hours', 'cool the cake in the pan on a rack for 5 minutes , then turn it out on the rack to cool completely']                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | why a millionaire pound cake?  because it's super rich!  this scrumptious cake is the pride of an elderly belle from jackson, mississippi.  the recipe comes from "the glory of southern cooking" by james villas.                                                                                                                                                                | ['butter', 'sugar', 'eggs', 'all-purpose flour', 'whole milk', 'pure vanilla extract', 'almond extract']                                                                                                                                |               7 |      286009 | ["don't let the calories and fat grams scare you off. This is a wonderful recipe and is perfect for the summer cook-out topped with fresh berries! It will make you proud. This is meant to be shared!"]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | [5.0]                | [813055]                         | ['2008-04-09']                                           |            5 | 2        |      878.3 |        20 | don't let the calories and fat grams scare you off. This is a wonderful recipe and is perfect for the summer cook-out topped with fresh berries! It will make you proud. This is meant to be shared!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |        0.236496  |         0        |
| 2000 meatloaf                        | 475785 |        90 |          2202916 | 2012-03-06  | ['time-to-make', 'course', 'main-ingredient', 'preparation', 'main-dish', 'potatoes', 'vegetables', '4-hours-or-less', 'meatloaf', 'simply-potatoes2']                                                                                                                                             | [267.0, 30.0, 12.0, 12.0, 29.0, 48.0, 2.0]    |        17 | ['pan fry bacon , and set aside on a paper towel to absorb excess grease', 'mince yellow onion , red bell pepper , and add to your mixing bowl', 'chop garlic and set aside', 'put 1tbsp olive oil into a saut pan , along with chopped garlic , teaspoons white pepper and a pinch of kosher salt', 'bring to a medium heat to sweat your garlic', 'preheat oven to 350f', 'coarsely chop your baby spinach add to your heated pan , stir frequently for approximately 5 min to wilt', 'add your spinach to the mixing bowl', 'chop your now cooled bacon , and add it to the mixing bowl', 'add your meatloaf mix to the bowl , with one egg and mix till thoroughly combined', 'add your goat cheese , one egg , 1 / 8 tsp white pepper and 1 / 8 tsp of kosher salt and mix till thoroughly combined', 'transfer to a 9x5 meatloaf pan , and cook for 60 min or until the internal temperature is at least 160f', 'let stand for 5min', 'melt 1tbsp unsalted butter into a frying pan , and cook up to three eggs at a time', 'crack each egg into a separate dish , in order to prevent egg shells from reaching the pan , then add salt and pepper to taste', 'wait until the egg whites are firm looking , but slightly runny on top before flipping your eggs', 'after flipping , wait 10~20 seconds before removing each egg and placing it over your slices of meatloaf'] | ready, set, cook! special edition contest entry: a mediterranean flavor inspired meatloaf dish. featuring: simply potatoes - shredded hash browns, egg, bacon, spinach, red bell pepper, and goat cheese.                                                                                                                                                                         | ['meatloaf mixture', 'unsmoked bacon', 'goat cheese', 'unsalted butter', 'eggs', 'baby spinach', 'yellow onion', 'red bell pepper', 'simply potatoes shredded hash browns', 'fresh garlic', 'kosher salt', 'white pepper', 'olive oil'] |              13 |      475785 | ['Delicious!!!!! -- the goat cheese made the difference.  My new favorite meatloaf.', "What a fabulous recipe. I have a lot of friends who either love to cook, are cookbook authors, are on TV with a cooking show, or who have been featured on cooking shows, so I know a thing or two about cooking. I know, for instance that cooking offers up a continual stream of adventures that do not require a passport or long airline layovers. Cooking is creative, expressive and comforting. A form of open eyed meditation lifting one beyond the commonplace. I'm a vegetarian, but I love to visit other recipes for inspiration so that I can use them by adapting the meat ingredients and therefore adopting them into my favorite recipe file.  All thumbs up for this recipe by an obviously gifted, dedicated and creative cook!"]                                                                                                                                                                                                                                                                                                      | [5.0, 5.0]           | [2204364, 2216720]               | ['2012-03-07', '2012-03-21']                             |            5 | 1.5      |      267   |        29 | Delicious!!!!! -- the goat cheese made the difference.  My new favorite meatloaf. What a fabulous recipe. I have a lot of friends who either love to cook, are cookbook authors, are on TV with a cooking show, or who have been featured on cooking shows, so I know a thing or two about cooking. I know, for instance that cooking offers up a continual stream of adventures that do not require a passport or long airline layovers. Cooking is creative, expressive and comforting. A form of open eyed meditation lifting one beyond the commonplace. I'm a vegetarian, but I love to visit other recipes for inspiration so that I can use them by adapting the meat ingredients and therefore adopting them into my favorite recipe file.  All thumbs up for this recipe by an obviously gifted, dedicated and creative cook! |        0.0839633 |         0        |  
 
### Univariate Plot Analyses
#### Univariate Analysis Plot 1: Average Ratings Distribution  
We used a histogram to showcase the average ratings distribution. From this distrubtion, we can see that most of the recipes have an average rating of 5 stars. Note that we use average ratings here since ratings are given as a list as there are multiple ratings per recipe. Because the distribution shows that most recipes receive an average rating of 5, recipes with slightly lower average ratings are more significant than we would think.

<iframe
src="assets/avg_rating_univariate.html"
width="800"
height="600"
frameborder="0"
></iframe>  
  
#### Univariate Analysis Plot 2: Cooking Time in Hours   
We restricted the range of the hours column when plotting this box plot so that we can clearly see the boxplot. When originally plotting the boxplot without restricting the hours column, the median and quartiles were not visible due to the extremely large scaling on the x axis for hours due to the outliers present. Something important to note about this boxplot is that although the median cooking time in hours is 0.583 hours, there are many outliers that are far about 2 hours. This suggests that there are many recipies that have a long cooking time. 

<iframe
src="assets/cooking_hours_univariate.html"
width="800"
height="600"
frameborder="0"
></iframe> 

#### Univariate Analysis Plot 3: Calories   
We restricted the range of the calories column when plotting this box plot so that we can clearly see the boxplot. When originally plotting the boxplot without restricting the calories column, the median and quartiles were not visible due to the extremely large scaling on the x axis for calories due to the outliers present. This boxplot has a median of 304.6 calories, but there many outliers that are above 1,000 calories. This makes sense because we do not know the serving sizes of the recipes and because many recipes vary by a very small number of calories.

<iframe
src="assets/calories_univariate.html"
width="800"
height="600"
frameborder="0"
></iframe>  

#### Univariate Analysis Plot 4: Protein 
We restricted the range of the protein column when plotting this box plot so that we can clearly see the boxplot. When originally plotting the boxplot without restricting the protein column, the median and quartiles were not visible due to the extremely large scaling on the x axis for protein due to the outliers present. The median value for protein is 18% daily value. Again, there are many outliers that surpass 100% daily value for protein, but this could be because many recipes could have a very high serving size.

<iframe
src="assets/protein_univariate.html"
width="800"
height="600"
frameborder="0"
></iframe>  

#### Bivariate Plot 1: Number of Steps vs Average Rating  
For this first bivariate plot, we took a look at the relation between the number of steps in a recipe and the average rating. From the plot, we can see that higher step ratings tend to be on the extreme ends of the rating distribution, either a 5 or a 2 whereas recipes with an average or low number of steps tend to have a more average-to-high rating (between 3 to 5 usually).  
 
<iframe
src="assets/n_steps_vs_avg_rating.html"
width="800"
height="600"
frameborder="0"
></iframe>   

#### Bivariate Plot 2: Number of Ingredients vs Average Rating  
For the second bivariate plot, we took a look at the relation between the number of ingredients in a recipe and the average rating. From the plot, we can see that the number of ingredients doesn't seem to play a large role in determining the average rating of a recipe as the ratings are fairly equally scattered across all numbers of ingredients.  
 
<iframe
src="assets/n_ingredients_vs_avg_rating.html"
width="800"
height="600"
frameborder="0"
></iframe> 
 
### Interesting Aggregates  
We grouped our dataframe by the number of steps in a recipe and then got the statistics for each column (excluding n_steps as this is what we grouped by) in the combined dataframe using the .describe() function.
 
Using this groupby object, we extracted the cooking time (in minutes) for each recipe and calculated the mean cooking time (in minutes) to complete each recipe. As expected, the general trend was that an increase in the number of steps led to an increase in mean cooking time. It is interesting to note that recipes with 93 steps seem to deviate significantly from the trend, as the mean cooking time drops to 360 minutes from a previous mean time of 1530 minutes for 88 step recipes.  
 
We also used this groupby object to extract the number of ingredients for each recipe and calculated the mean number of steps for needed to complete these recipes. As expected, the general trend was that an increase in steps lead to an increase in mean number of ingredients for a recipe.
 

|   n_steps |   ('id', 'count') |   ('id', 'mean') |   ('id', 'std') |   ('id', 'min') |   ('id', '25%') |   ('id', '50%') |   ('id', '75%') |   ('id', 'max') |   ('minutes', 'count') |   ('minutes', 'mean') |   ('minutes', 'std') |   ('minutes', 'min') |   ('minutes', '25%') |   ('minutes', '50%') |   ('minutes', '75%') |   ('minutes', 'max') |   ('contributor_id', 'count') |   ('contributor_id', 'mean') |   ('contributor_id', 'std') |   ('contributor_id', 'min') |   ('contributor_id', '25%') |   ('contributor_id', '50%') |   ('contributor_id', '75%') |   ('contributor_id', 'max') |   ('n_ingredients', 'count') |   ('n_ingredients', 'mean') |   ('n_ingredients', 'std') |   ('n_ingredients', 'min') |   ('n_ingredients', '25%') |   ('n_ingredients', '50%') |   ('n_ingredients', '75%') |   ('n_ingredients', 'max') |   ('recipe_id', 'count') |   ('recipe_id', 'mean') |   ('recipe_id', 'std') |   ('recipe_id', 'min') |   ('recipe_id', '25%') |   ('recipe_id', '50%') |   ('recipe_id', '75%') |   ('recipe_id', 'max') |   ('avg_rating', 'count') |   ('avg_rating', 'mean') |   ('avg_rating', 'std') |   ('avg_rating', 'min') |   ('avg_rating', '25%') |   ('avg_rating', '50%') |   ('avg_rating', '75%') |   ('avg_rating', 'max') |   ('hours', 'count') |   ('hours', 'mean') |   ('hours', 'std') |   ('hours', 'min') |   ('hours', '25%') |   ('hours', '50%') |   ('hours', '75%') |   ('hours', 'max') |   ('calories', 'count') |   ('calories', 'mean') |   ('calories', 'std') |   ('calories', 'min') |   ('calories', '25%') |   ('calories', '50%') |   ('calories', '75%') |   ('calories', 'max') |   ('protein', 'count') |   ('protein', 'mean') |   ('protein', 'std') |   ('protein', 'min') |   ('protein', '25%') |   ('protein', '50%') |   ('protein', '75%') |   ('protein', 'max') |   ('positive_score', 'count') |   ('positive_score', 'mean') |   ('positive_score', 'std') |   ('positive_score', 'min') |   ('positive_score', '25%') |   ('positive_score', '50%') |   ('positive_score', '75%') |   ('positive_score', 'max') |   ('negative_score', 'count') |   ('negative_score', 'mean') |   ('negative_score', 'std') |   ('negative_score', 'min') |   ('negative_score', '25%') |   ('negative_score', '50%') |   ('negative_score', '75%') |   ('negative_score', 'max') |
|----------:|------------------:|-----------------:|----------------:|----------------:|----------------:|----------------:|----------------:|----------------:|-----------------------:|----------------------:|---------------------:|---------------------:|---------------------:|---------------------:|---------------------:|---------------------:|------------------------------:|-----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|-----------------------------:|----------------------------:|---------------------------:|---------------------------:|---------------------------:|---------------------------:|---------------------------:|---------------------------:|-------------------------:|------------------------:|-----------------------:|-----------------------:|-----------------------:|-----------------------:|-----------------------:|-----------------------:|--------------------------:|-------------------------:|------------------------:|------------------------:|------------------------:|------------------------:|------------------------:|------------------------:|---------------------:|--------------------:|-------------------:|-------------------:|-------------------:|-------------------:|-------------------:|-------------------:|------------------------:|-----------------------:|----------------------:|----------------------:|----------------------:|----------------------:|----------------------:|----------------------:|-----------------------:|----------------------:|---------------------:|---------------------:|---------------------:|---------------------:|---------------------:|---------------------:|------------------------------:|-----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|------------------------------:|-----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|----------------------------:|
|         1 |              1109 |           376349 |         68657.5 |          275046 |          315130 |          369056 |          432813 |          514390 |                   1109 |               31.9098 |              256.251 |                    0 |                    5 |                    5 |                   10 |                 7440 |                          1109 |                  8.70611e+06 |                 1.20634e+08 |                        4740 |                      283251 |                      457690 |                      792313 |                 1.80183e+09 |                         1109 |                     5.6862  |                    2.54505 |                          2 |                          4 |                          5 |                          7 |                         17 |                     1109 |                  376349 |                68657.5 |                 275046 |                 315130 |                 369056 |                 432813 |                 514390 |                      1109 |                  4.54335 |                0.915947 |                       0 |                 4.33333 |                       5 |                       5 |                       5 |                 1109 |            0.53183  |            4.27086 |          0         |          0.0833333 |          0.0833333 |           0.166667 |            124     |                    1109 |                285.133 |               408.772 |                   0.1 |                83.4   |                161.4  |                315.4  |                4541.2 |                   1109 |               13.0821 |              25.6846 |                    0 |                    0 |                    4 |                   15 |                  283 |                          1109 |                     0.10621  |                    0.098294 |                           0 |                   0         |                   0.0938007 |                    0.165182 |                     0.61132 |                          1109 |                   0.00861386 |                   0.0362244 |                           0 |                           0 |                           0 |                           0 |                    0.368017 |
|         2 |              2627 |           377218 |         69086.6 |          275144 |          314562 |          371571 |          429742 |          536728 |                   2627 |               36.9494 |              156.532 |                    1 |                    5 |                    7 |                   15 |                 4335 |                          2627 |                  7.78885e+06 |                 1.17223e+08 |                        4439 |                      224760 |                      433068 |                      765348 |                 2.00203e+09 |                         2627 |                     6.03959 |                    2.55554 |                          1 |                          4 |                          6 |                          8 |                         20 |                     2627 |                  377218 |                69086.6 |                 275144 |                 314562 |                 371571 |                 429742 |                 536728 |                      2627 |                  4.57909 |                0.875285 |                       0 |                 4.5     |                       5 |                       5 |                       5 |                 2627 |            0.615823 |            2.60886 |          0.0166667 |          0.0833333 |          0.116667  |           0.25     |             72.25  |                    2627 |                293.095 |               415.904 |                   0   |                93.55  |                181.1  |                327.2  |                6730.7 |                   2627 |               15.3087 |              28.6205 |                    0 |                    1 |                    6 |                   18 |                  489 |                          2627 |                     0.114371 |                    0.10296  |                           0 |                   0         |                   0.101533  |                    0.174134 |                     1       |                          2627 |                   0.0101469  |                   0.038742  |                           0 |                           0 |                           0 |                           0 |                    0.538478 |
|         3 |              4044 |           375343 |         65988   |          275043 |          317406 |          369732 |          426732 |          535652 |                   4044 |               50.3808 |              281.381 |                    1 |                    5 |                   10 |                   30 |                10100 |                          4044 |                  6.75981e+06 |                 1.09057e+08 |                        1535 |                      226863 |                      461283 |                      795197 |                 2.00197e+09 |                         4044 |                     6.54204 |                    2.8656  |                          1 |                          4 |                          6 |                          8 |                         21 |                     4044 |                  375343 |                65988   |                 275043 |                 317406 |                 369732 |                 426732 |                 535652 |                      4044 |                  4.55185 |                0.919701 |                       0 |                 4.5     |                       5 |                       5 |                       5 |                 4044 |            0.83968  |            4.68969 |          0.0166667 |          0.0833333 |          0.166667  |           0.5      |            168.333 |                    4044 |                307.189 |               432.052 |                   0   |               101.275 |                197.55 |                356.85 |                5976.1 |                   4044 |               18.3071 |              31.4414 |                    0 |                    2 |                    7 |                   21 |                  478 |                          4044 |                     0.121114 |                    0.10803  |                           0 |                   0.0283054 |                   0.108728  |                    0.182744 |                     1.32833 |                          4044 |                   0.00883661 |                   0.0353067 |                           0 |                           0 |                           0 |                           0 |                    0.410581 |
|         4 |              5073 |           376743 |         66646.5 |          275074 |          318040 |          370418 |          428373 |          536734 |                   5073 |               85.6803 |              879.584 |                    1 |                   10 |                   20 |                   40 |                43202 |                          5073 |                  5.71414e+06 |                 9.76034e+07 |                        1533 |                      233780 |                      461724 |                      784869 |                 2.00111e+09 |                         5073 |                     7.15119 |                    3.01616 |                          1 |                          5 |                          7 |                          9 |                         24 |                     5073 |                  376743 |                66646.5 |                 275074 |                 318040 |                 370418 |                 428373 |                 536734 |                      5073 |                  4.52388 |                0.952943 |                       0 |                 4.33333 |                       5 |                       5 |                       5 |                 5073 |            1.428    |           14.6597  |          0.0166667 |          0.166667  |          0.333333  |           0.666667 |            720.033 |                    5073 |                344.003 |               816.228 |                   0   |               124.7   |                230.1  |                388.1  |               45609   |                   5073 |               24.4059 |              69.6774 |                    0 |                    3 |                   11 |                   32 |                 4356 |                          5073 |                     0.117025 |                    0.105029 |                           0 |                   0         |                   0.101626  |                    0.179519 |                     1       |                          5073 |                   0.0110179  |                   0.0411809 |                           0 |                           0 |                           0 |                           0 |                    0.735555 |
|         5 |              6146 |           377089 |         66724.8 |          275035 |          319483 |          370527 |          428318 |          537459 |                   6146 |               84.1032 |              688.125 |                    1 |                   15 |                   25 |                   50 |                30240 |                          6146 |                  1.0292e+07  |                 1.34322e+08 |                        1533 |                      228458 |                      461724 |                      808027 |                 2.00223e+09 |                         6146 |                     7.63781 |                    3.11493 |                          1 |                          5 |                          7 |                          9 |                         28 |                     6146 |                  377089 |                66724.8 |                 275035 |                 319483 |                 370527 |                 428318 |                 537459 |                      6146 |                  4.48961 |                0.965835 |                       0 |                 4.2     |                       5 |                       5 |                       5 |                 6146 |            1.40172  |           11.4687  |          0.0166667 |          0.25      |          0.416667  |           0.833333 |            504     |                    6146 |                358.074 |               500.932 |                   0   |               141     |                256.1  |                423.5  |               17551.6 |                   6146 |               27.2703 |              37.9138 |                    0 |                    5 |                   13 |                   40 |                 1043 |                          6146 |                     0.115314 |                    0.107137 |                           0 |                   0         |                   0.0988315 |                    0.178443 |                     1       |                          6146 |                   0.0114258  |                   0.0419448 |                           0 |                           0 |                           0 |                           0 |                    1        |


## Framing a Prediction Problem  
We choose to reframe our driving question into a prediction problem in the following manner:  
#### Given features such as number of ingredients, cooking time, nutritional information, and number of steps, can we predict the average rating of a recipe?  
Our prediction problem is a regression type problem as we are predicting a continouous quantitative variable (average rating) based on other factors relating to the recipe in the data set. The response variable we choose for this analysis is the average rating of each recipe and we choose this variable as it provides a good indicating of public opinion of a recipe. In order to make this prediction, we will have information regarding features such as number of ingredients, cooking time, nutritional information, and number of steps, and reviews of the recipe which we will turn into quantitative columns in step 5 of our analysis.  
 
## Baseline Model  
We used the features of protein, calories, number of steps, number of ingredients, and cooking time in hours for the design matrix in our baseline model. We decided to split our data using a 20, 80 split where 20% is the test data and 80% is the training data. We used a pipline with a standard scalar to standardize the data so that features with larger values are not overrepresented in the model. For this baseline model, we used linear regression. Even though this baseline model is preliminary, we noted that the R^2 value (-0.002352096368602785) was very low for this model and as such, we made some drastic changes on the to this model in order to come up with the final model. In order to make these changes, we also decided to look at the correlation coefficients for each of the feature columns and noticed they were very low, thus we decided to make two new columns that we will discuss in detail in the next section.

 
## Final Model
